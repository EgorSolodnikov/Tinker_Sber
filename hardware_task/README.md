# Hardware Task

Это немного модифицированный исходный код hardware_task (образца 2022 года)

## Описание проекта

Hardware Task - это C++ приложение для работы с аппаратными компонентами через SPI интерфейс. Программа обеспечивает:

- Коммуникацию с микроконтроллером STM32 через SPI
- Обработку данных от IMU и данных с мотора по CAN
- Многопоточную обработку данных
- Обмен данными через shared memory (заменим на ROS2)
- Конфигурацию через YAML файлы

## Зависимости

### Системные зависимости
- CMake (версия 3.10 или выше)
- GCC с поддержкой C++11
- pthread библиотека
- Linux SPI драйвер (spidev)

### Внешние библиотеки
- **yaml-cpp** - для работы с YAML конфигурационными файлами
- **serial** - для последовательной коммуникации

## Структура проекта

```
hardware_task/
├── src/           # Исходные файлы
│   ├── main.cpp   # Основной файл программы
│   ├── spi.cpp    # Реализация SPI интерфейса
│   ├── serial.cpp # Реализация последовательной коммуникации
│   ├── sys_timer.cpp # Системный таймер
│   └── comm.c    # Функции коммуникации
├── include/       # Заголовочные файлы
│   ├── spi_node.h # Определения SPI узлов
│   ├── spi.h      # SPI интерфейс
│   ├── serial.hpp # Последовательная коммуникация
│   ├── sys_time.h # Системное время
│   └── comm.h     # Заголовки коммуникации
├── library/       # Внешние библиотеки
│   ├── serial/    # Библиотека serial
│   └── yaml-cpp/  # Библиотека yaml-cpp
├── build/         # Сборка (игнорируется git)
└── CMakeLists.txt # Файл сборки CMake
```

## Для сборки нужно:

### 1. Установить зависимости

```bash
# Обновить пакеты
sudo apt update

# Установить необходимые пакеты
sudo apt install build-essential cmake git
```

### 2. Клонировать и собрать проект

```bash
# Перейти в директорию проекта
cd hardware_task

# Создать директорию для сборки
mkdir -p build
cd build

# Сконфигурировать проект
cmake ..

# Собрать проект
make -j$(nproc)
```

### 3. Альтернативная сборка (из корневой директории)

```bash
# Создать директорию build в корне проекта
mkdir -p build
cd build

# Сконфигурировать и собрать
cmake ../hardware_task
make -j$(nproc)
```

## Конфигурация

Программа использует YAML конфигурационный файл по пути:
```
/home/odroid/Tinker/Param/param_hardware.yaml
```

Убедитесь, что файл существует и содержит корректные параметры.

## Использование

### Запуск программы

```bash
# Из директории build
./hardware_task_log

# Или с параметрами (если поддерживаются)
./hardware_task_log [опции]
```
